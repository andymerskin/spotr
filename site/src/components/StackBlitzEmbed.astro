---
interface Props {
  framework: string;
  example: string;
}

const { framework, example } = Astro.props;

// Map frameworks to their App file paths where spotr configuration lives
const frameworkAppFiles: Record<string, string> = {
  react: 'src/App.tsx',
  vue: 'src/App.vue',
  svelte: 'src/App.svelte',
  solid: 'src/App.tsx',
  preact: 'src/App.tsx',
};

const branch = 'master';
const embedParamsObj = {
  embed: '1',
  theme: 'dark',
  preset: 'node',
  terminalHeight: '0',
  file: frameworkAppFiles[framework] ?? frameworkAppFiles.react,
};
const embedParams = new URLSearchParams(embedParamsObj).toString();

const src = `https://stackblitz.com/github/andymerskin/spotr/tree/${branch}/examples/${framework}/${example}?${embedParams}`;
---

<div
  class="w-full border border-neutral-600 rounded-lg overflow-hidden"
  id="stackblitz-embed-container"
>
  <iframe
    id="stackblitz-embed"
    src={src}
    title={`Spotr ${example} - ${framework} example`}
    class="w-full h-full min-h-[80dvh] overflow-hidden bg-black"
    sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-presentation allow-modals"
  ></iframe>
</div>
